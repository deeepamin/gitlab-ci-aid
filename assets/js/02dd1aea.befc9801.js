"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[581],{489:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/extract-ref-71ebdc18ffef1ff653b90d12a2d1e0a7.png"},716:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/extract-ref-after-5bb4068b3a97e57ca61c0a65c789fb3d.png"},1007:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>f,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"features/refactoring","title":"Refactoring","description":"Refactoring actions can be performed on GitLab CI YAML files to improve the structure and maintainability of the configuration. The plugin provides several refactoring options that can be accessed from the context menu of a job or section in the YAML file.","source":"@site/docs/features/refactoring.md","sourceDirName":"features","slug":"/features/refactoring","permalink":"/gitlab-ci-aid/docs/features/refactoring","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Quick Fixes","permalink":"/gitlab-ci-aid/docs/features/quick-fixes"},"next":{"title":"Remote Includes","permalink":"/gitlab-ci-aid/docs/features/remote-includes"}}');var i=r(4848),o=r(8453);const c={},a="Refactoring",s={},d=[{value:"Move job to another file",id:"move-job-to-another-file",level:3},{value:"Move to Default",id:"move-to-default",level:3},{value:"Extract !reference",id:"extract-reference",level:3},{value:"Before Refactoring:",id:"before-refactoring",level:6},{value:"Refactoring:",id:"refactoring-1",level:6},{value:"After Refactoring:",id:"after-refactoring",level:6}];function l(e){const t={code:"code",h1:"h1",h3:"h3",h6:"h6",header:"header",img:"img",p:"p",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"refactoring",children:"Refactoring"})}),"\n",(0,i.jsx)(t.p,{children:"Refactoring actions can be performed on GitLab CI YAML files to improve the structure and maintainability of the configuration. The plugin provides several refactoring options that can be accessed from the context menu of a job or section in the YAML file."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"img/refactoring.png",src:r(6276).A+"",width:"696",height:"568"})}),"\n",(0,i.jsx)(t.p,{children:"Following refactorings are available for GitLab CI YAML files:"}),"\n",(0,i.jsx)(t.h3,{id:"move-job-to-another-file",children:"Move job to another file"}),"\n",(0,i.jsxs)(t.p,{children:["From refactoring menu (right-click on the job > ",(0,i.jsx)(t.code,{children:"Refactor"})," > ",(0,i.jsx)(t.code,{children:"Move..."}),"), you can move the job to another file. The plugin will prompt you to select the target file from all known files, and it will move the job to that file.\nThe job will be removed from the original file, and if the job is using YAML anchors (&) they will be removed, and the aliases (*) will be replaced in line to moved job with actual values."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"Open in Editor"})," checkbox can be used to open the target file in the editor after the refactoring is done."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"img/move-job.png",src:r(8261).A+"",width:"604",height:"206"})}),"\n",(0,i.jsx)(t.h3,{id:"move-to-default",children:"Move to Default"}),"\n",(0,i.jsxs)(t.p,{children:["From refactoring menu (right-click on the job > ",(0,i.jsx)(t.code,{children:"Refactor"})," > ",(0,i.jsx)(t.code,{children:"Move to Default"}),"), you can move supported elements to ",(0,i.jsx)(t.code,{children:"default"})," section.\nIf the ",(0,i.jsx)(t.code,{children:"default"})," section does not exist, it will be created at the top of the file."]}),"\n",(0,i.jsxs)(t.p,{children:["GitLab CI/CD supports ",(0,i.jsx)(t.code,{children:"default"})," section to define default values for jobs, currently supported elements are ",(0,i.jsx)(t.code,{children:"after_script"}),", ",(0,i.jsx)(t.code,{children:"artifacts"}),", ",(0,i.jsx)(t.code,{children:"before_script"}),", ",(0,i.jsx)(t.code,{children:"cache"}),", ",(0,i.jsx)(t.code,{children:"image"}),", ",(0,i.jsx)(t.code,{children:"interruptible"}),", ",(0,i.jsx)(t.code,{children:"id_tokens"}),", ",(0,i.jsx)(t.code,{children:"identity"}),", ",(0,i.jsx)(t.code,{children:"retry"}),", ",(0,i.jsx)(t.code,{children:"services"}),", ",(0,i.jsx)(t.code,{children:"tags"}),", ",(0,i.jsx)(t.code,{children:"timeout"})," and ",(0,i.jsx)(t.code,{children:"!reference"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"extract-reference",children:"Extract !reference"}),"\n",(0,i.jsxs)(t.p,{children:["From refactoring menu (right-click on the job > ",(0,i.jsx)(t.code,{children:"Refactor"})," > ",(0,i.jsx)(t.code,{children:"Extract !reference"}),"), you can extract the selected section of a job to a reference tag (!reference).\nThe plugin will prompt you to enter the name of the reference tag, and it will replace the selected section with the reference tag in the job. The reference tag will be added to the bottom of the file, and it will be used in the job."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"Open in Editor"})," checkbox can be used to open the target file in the editor after the refactoring is done."]}),"\n",(0,i.jsx)(t.h6,{id:"before-refactoring",children:"Before Refactoring:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"img/extract-ref-before.png",src:r(1309).A+"",width:"310",height:"182"})}),"\n",(0,i.jsx)(t.h6,{id:"refactoring-1",children:"Refactoring:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"img/extract-ref.png",src:r(489).A+"",width:"604",height:"206"})}),"\n",(0,i.jsx)(t.h6,{id:"after-refactoring",children:"After Refactoring:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"img/extract-ref-after.png",src:r(716).A+"",width:"518",height:"429"})})]})}function f(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},1309:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/extract-ref-before-07d608e809c374283e1a9707f57559d3.png"},6276:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/refactoring-8ed1d91eee52dfb65dc359a7619f2101.png"},8261:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/move-job-71ebdc18ffef1ff653b90d12a2d1e0a7.png"},8453:(e,t,r)=>{r.d(t,{R:()=>c,x:()=>a});var n=r(6540);const i={},o=n.createContext(i);function c(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);